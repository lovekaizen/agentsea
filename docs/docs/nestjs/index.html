<!doctype html>
<!--BR2GXXFimfBinRJoMr3YY-->
<html lang="en" data-theme="cmyk">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="preload"
      href="/_next/static/media/e4af272ccee01ff0-s.p.woff2"
      as="font"
      crossorigin=""
      type="font/woff2"
    />
    <link
      rel="stylesheet"
      href="/_next/static/css/7e7d96b1e6991756.css"
      data-precedence="next"
    />
    <link
      rel="stylesheet"
      href="/_next/static/css/1145ad3a91ffb5c9.css"
      data-precedence="next"
    />
    <link
      rel="stylesheet"
      href="/_next/static/css/7a622664f4c377b7.css"
      data-precedence="next"
    />
    <link
      rel="preload"
      as="script"
      fetchpriority="low"
      href="/_next/static/chunks/webpack-1b7e2f9af6e0232d.js"
    />
    <script
      src="/_next/static/chunks/4bd1b696-c023c6e3521b1417.js"
      async=""
    ></script>
    <script
      src="/_next/static/chunks/255-0fb808ac7cfa018d.js"
      async=""
    ></script>
    <script
      src="/_next/static/chunks/main-app-55a8534c92ac85d5.js"
      async=""
    ></script>
    <script
      src="/_next/static/chunks/619-ba102abea3e3d0e4.js"
      async=""
    ></script>
    <script
      src="/_next/static/chunks/543-a0960cd7f2b1c22c.js"
      async=""
    ></script>
    <script
      src="/_next/static/chunks/app/layout-b0f860a3d9150669.js"
      async=""
    ></script>
    <script
      src="/_next/static/chunks/501-26489c9c153fdafc.js"
      async=""
    ></script>
    <script
      src="/_next/static/chunks/app/docs/nestjs/page-1661e6a98b49e8b6.js"
      async=""
    ></script>
    <meta name="next-size-adjust" content="" />
    <title>AgentSea - Unite and Orchestrate AI Agents</title>
    <meta
      name="description"
      content="Build powerful agentic AI applications with AgentSea. Unite AI agents and services with multi-provider support, workflow orchestration, MCP protocol, and enterprise-grade observability."
    />
    <script
      src="/_next/static/chunks/polyfills-42372ed130431b0a.js"
      nomodule=""
    ></script>
  </head>
  <body class="__className_f367f3">
    <div hidden=""><!--$--><!--/$--></div>
    <div class="drawer lg:drawer-open">
      <input id="main-drawer" type="checkbox" class="drawer-toggle" />
      <div class="drawer-content flex flex-col">
        <div class="navbar">
          <div class="flex-none lg:hidden">
            <label for="main-drawer" class="btn btn-square btn-ghost"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                class="inline-block w-6 h-6 stroke-current"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                ></path></svg
            ></label>
          </div>
          <div class="flex-1">
            <a class="btn btn-ghost px-0 py-6" href="/"
              ><img
                alt="AgentSea Logo"
                loading="lazy"
                width="217"
                height="60"
                decoding="async"
                data-nimg="1"
                style="color: transparent"
                src="/agentsea-sdk-logo.svg"
            /></a>
          </div>
          <div class="flex-none">
            <a
              href="https://github.com/lovekaizen/agentsea"
              target="_blank"
              rel="noopener noreferrer"
              class="btn btn-ghost btn-circle"
              title="AgentSea on Github"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
                ></path></svg
            ></a>
          </div>
        </div>
        <main class="flex-1">
          <div class="min-h-screen bg-base-100">
            <div class="container mx-auto px-6 py-12 max-w-5xl">
              <div class="mb-12">
                <h1 class="text-5xl font-bold mb-4">NestJS Integration</h1>
                <p class="text-xl text-base-content/70">
                  Seamlessly integrate AgentSea with NestJS using decorators,
                  modules, and dependency injection for building
                  enterprise-grade agentic applications.
                </p>
              </div>
              <div class="prose max-w-none">
                <h2>Installation</h2>
                <p>Install both core and NestJS packages:</p>
                <div
                  class="my-6 rounded-lg overflow-hidden shadow-lg bg-gray-900 border border-base-300 relative group"
                >
                  <div
                    class="flex items-center justify-between bg-base-300 px-4 py-2 border-b border-base-content/10"
                  >
                    <span
                      class="text-xs font-semibold text-base-content/60 uppercase"
                      >bash</span
                    ><button
                      class="btn btn-xs btn-ghost gap-1 opacity-70 hover:opacity-100 transition-opacity"
                      title="Copy to clipboard"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-4 w-4"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                        ></path></svg
                      ><span>Copy</span>
                    </button>
                  </div>
                  <div class="overflow-x-auto">
                    <pre
                      style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1rem;margin:0;overflow:auto;border-radius:0.3em;background:transparent;font-size:0.875rem"
                    ><code style="white-space:pre;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace"><span class="token" style="color:#7C7C7C"># Install packages</span><span>
</span><span></span><span class="token" style="color:#DAD085">pnpm</span><span> </span><span class="token" style="color:#DAD085">add</span><span> @lov3kaizen/agentsea-core @lov3kaizen/agentsea-nestjs
</span>
<span></span><span class="token" style="color:#7C7C7C"># Install NestJS dependencies</span><span>
</span><span></span><span class="token" style="color:#DAD085">pnpm</span><span> </span><span class="token" style="color:#DAD085">add</span><span> @nestjs/common @nestjs/core reflect-metadata rxjs</span></code></pre>
                  </div>
                </div>
                <h2>Module Setup</h2>
                <p>Configure the AgentSea module in your NestJS application:</p>
                <div
                  class="my-6 rounded-lg overflow-hidden shadow-lg bg-gray-900 border border-base-300 relative group"
                >
                  <div
                    class="flex items-center justify-between bg-base-300 px-4 py-2 border-b border-base-content/10"
                  >
                    <span
                      class="text-xs font-semibold text-base-content/60 uppercase"
                      >typescript</span
                    ><button
                      class="btn btn-xs btn-ghost gap-1 opacity-70 hover:opacity-100 transition-opacity"
                      title="Copy to clipboard"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-4 w-4"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                        ></path></svg
                      ><span>Copy</span>
                    </button>
                  </div>
                  <div class="overflow-x-auto">
                    <pre
                      style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1rem;margin:0;overflow:auto;border-radius:0.3em;background:transparent;font-size:0.875rem"
                    ><code style="white-space:pre;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace"><span class="token" style="color:#7C7C7C">// app.module.ts</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> Module </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@nestjs/common&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> AgenticModule </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@lov3kaizen/agentsea-nestjs&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> AnthropicProvider </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@lov3kaizen/agentsea-core&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span></span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">Module</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>  imports</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span>
</span><span>    AgenticModule</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">forRoot</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>      provider</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#96CBFE">new</span><span> </span><span class="token" style="color:#FFFFB6;text-decoration:underline">AnthropicProvider</span><span class="token" style="color:#c5c8c6">(</span><span>process</span><span class="token" style="color:#c5c8c6">.</span><span>env</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#99CC99">ANTHROPIC_API_KEY</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>      defaultConfig</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>        model</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">&#x27;claude-sonnet-4-20250514&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>        provider</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">&#x27;anthropic&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>        temperature</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#FF73FD">0.7</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>        maxTokens</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#FF73FD">2048</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>      </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span></span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span></span><span class="token" style="color:#96CBFE">export</span><span> </span><span class="token" style="color:#96CBFE">class</span><span> </span><span class="token" style="color:#FFFFB6;text-decoration:underline">AppModule</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span class="token" style="color:#c5c8c6">}</span></code></pre>
                  </div>
                </div>
                <h3>Async Configuration</h3>
                <p>Use async configuration for dynamic setup:</p>
                <div
                  class="my-6 rounded-lg overflow-hidden shadow-lg bg-gray-900 border border-base-300 relative group"
                >
                  <div
                    class="flex items-center justify-between bg-base-300 px-4 py-2 border-b border-base-content/10"
                  >
                    <span
                      class="text-xs font-semibold text-base-content/60 uppercase"
                      >typescript</span
                    ><button
                      class="btn btn-xs btn-ghost gap-1 opacity-70 hover:opacity-100 transition-opacity"
                      title="Copy to clipboard"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-4 w-4"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                        ></path></svg
                      ><span>Copy</span>
                    </button>
                  </div>
                  <div class="overflow-x-auto">
                    <pre
                      style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1rem;margin:0;overflow:auto;border-radius:0.3em;background:transparent;font-size:0.875rem"
                    ><code style="white-space:pre;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace"><span class="token" style="color:#7C7C7C">// app.module.ts</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> Module </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@nestjs/common&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> ConfigModule</span><span class="token" style="color:#c5c8c6">,</span><span> ConfigService </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@nestjs/config&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> AgenticModule </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@lov3kaizen/agentsea-nestjs&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> AnthropicProvider </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@lov3kaizen/agentsea-core&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span></span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">Module</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>  imports</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span>
</span><span>    ConfigModule</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">forRoot</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    AgenticModule</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">forRootAsync</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>      imports</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span>ConfigModule</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>      inject</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span>ConfigService</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>      </span><span class="token function-variable" style="color:#DAD085">useFactory</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#96CBFE">async</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>config</span><span class="token" style="color:#EDEDED">:</span><span> ConfigService</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>        provider</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#96CBFE">new</span><span> </span><span class="token" style="color:#FFFFB6;text-decoration:underline">AnthropicProvider</span><span class="token" style="color:#c5c8c6">(</span><span>config</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">get</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;ANTHROPIC_API_KEY&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>        defaultConfig</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>          model</span><span class="token" style="color:#EDEDED">:</span><span> config</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">get</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;AGENT_MODEL&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#A8FF60">&#x27;claude-sonnet-4-20250514&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>          provider</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">&#x27;anthropic&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>          temperature</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#DAD085">Number</span><span class="token" style="color:#c5c8c6">(</span><span>config</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">get</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;AGENT_TEMPERATURE&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#FF73FD">0.7</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>        </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>      </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span></span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span></span><span class="token" style="color:#96CBFE">export</span><span> </span><span class="token" style="color:#96CBFE">class</span><span> </span><span class="token" style="color:#FFFFB6;text-decoration:underline">AppModule</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span class="token" style="color:#c5c8c6">}</span></code></pre>
                  </div>
                </div>
                <h2>Agent Service</h2>
                <p>Create an agent service using dependency injection:</p>
                <div
                  class="my-6 rounded-lg overflow-hidden shadow-lg bg-gray-900 border border-base-300 relative group"
                >
                  <div
                    class="flex items-center justify-between bg-base-300 px-4 py-2 border-b border-base-content/10"
                  >
                    <span
                      class="text-xs font-semibold text-base-content/60 uppercase"
                      >typescript</span
                    ><button
                      class="btn btn-xs btn-ghost gap-1 opacity-70 hover:opacity-100 transition-opacity"
                      title="Copy to clipboard"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-4 w-4"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                        ></path></svg
                      ><span>Copy</span>
                    </button>
                  </div>
                  <div class="overflow-x-auto">
                    <pre
                      style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1rem;margin:0;overflow:auto;border-radius:0.3em;background:transparent;font-size:0.875rem"
                    ><code style="white-space:pre;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace"><span class="token" style="color:#7C7C7C">// chat.service.ts</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> Injectable </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@nestjs/common&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> Agent</span><span class="token" style="color:#c5c8c6">,</span><span> ToolRegistry</span><span class="token" style="color:#c5c8c6">,</span><span> BufferMemory </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@lov3kaizen/agentsea-core&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> InjectAgent </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@lov3kaizen/agentsea-nestjs&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span></span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">Injectable</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span></span><span class="token" style="color:#96CBFE">export</span><span> </span><span class="token" style="color:#96CBFE">class</span><span> </span><span class="token" style="color:#FFFFB6;text-decoration:underline">ChatService</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>  </span><span class="token" style="color:#DAD085">constructor</span><span class="token" style="color:#c5c8c6">(</span><span>
</span><span>    </span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">InjectAgent</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#96CBFE">private</span><span> </span><span class="token" style="color:#96CBFE">readonly</span><span> agent</span><span class="token" style="color:#EDEDED">:</span><span> Agent</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token" style="color:#96CBFE">private</span><span> </span><span class="token" style="color:#96CBFE">readonly</span><span> toolRegistry</span><span class="token" style="color:#EDEDED">:</span><span> ToolRegistry</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token" style="color:#96CBFE">private</span><span> </span><span class="token" style="color:#96CBFE">readonly</span><span> memory</span><span class="token" style="color:#EDEDED">:</span><span> BufferMemory</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span class="token" style="color:#c5c8c6">}</span><span>
</span>
<span>  </span><span class="token" style="color:#96CBFE">async</span><span> </span><span class="token" style="color:#DAD085">chat</span><span class="token" style="color:#c5c8c6">(</span><span>userId</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">string</span><span class="token" style="color:#c5c8c6">,</span><span> message</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">string</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>    </span><span class="token" style="color:#96CBFE">const</span><span> response </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#96CBFE">await</span><span> </span><span class="token" style="color:#96CBFE">this</span><span class="token" style="color:#c5c8c6">.</span><span>agent</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">execute</span><span class="token" style="color:#c5c8c6">(</span><span>message</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>      conversationId</span><span class="token" style="color:#EDEDED">:</span><span> userId</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>      sessionData</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> userId </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>      history</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#96CBFE">await</span><span> </span><span class="token" style="color:#96CBFE">this</span><span class="token" style="color:#c5c8c6">.</span><span>memory</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">load</span><span class="token" style="color:#c5c8c6">(</span><span>userId</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>    </span><span class="token" style="color:#96CBFE">await</span><span> </span><span class="token" style="color:#96CBFE">this</span><span class="token" style="color:#c5c8c6">.</span><span>memory</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">save</span><span class="token" style="color:#c5c8c6">(</span><span>userId</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span>
</span><span>      </span><span class="token" style="color:#EDEDED">...</span><span class="token" style="color:#96CBFE">await</span><span> </span><span class="token" style="color:#96CBFE">this</span><span class="token" style="color:#c5c8c6">.</span><span>memory</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">load</span><span class="token" style="color:#c5c8c6">(</span><span>userId</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>      </span><span class="token" style="color:#c5c8c6">{</span><span> role</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">&#x27;user&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span> content</span><span class="token" style="color:#EDEDED">:</span><span> message </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>      </span><span class="token" style="color:#c5c8c6">{</span><span> role</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">&#x27;assistant&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span> content</span><span class="token" style="color:#EDEDED">:</span><span> response</span><span class="token" style="color:#c5c8c6">.</span><span>content </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>    </span><span class="token" style="color:#96CBFE">return</span><span> response</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span>
</span><span></span><span class="token" style="color:#c5c8c6">}</span></code></pre>
                  </div>
                </div>
                <h2>Agent Controller</h2>
                <p>Create REST endpoints for your agents:</p>
                <div
                  class="my-6 rounded-lg overflow-hidden shadow-lg bg-gray-900 border border-base-300 relative group"
                >
                  <div
                    class="flex items-center justify-between bg-base-300 px-4 py-2 border-b border-base-content/10"
                  >
                    <span
                      class="text-xs font-semibold text-base-content/60 uppercase"
                      >typescript</span
                    ><button
                      class="btn btn-xs btn-ghost gap-1 opacity-70 hover:opacity-100 transition-opacity"
                      title="Copy to clipboard"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-4 w-4"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                        ></path></svg
                      ><span>Copy</span>
                    </button>
                  </div>
                  <div class="overflow-x-auto">
                    <pre
                      style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1rem;margin:0;overflow:auto;border-radius:0.3em;background:transparent;font-size:0.875rem"
                    ><code style="white-space:pre;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace"><span class="token" style="color:#7C7C7C">// chat.controller.ts</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> Controller</span><span class="token" style="color:#c5c8c6">,</span><span> Post</span><span class="token" style="color:#c5c8c6">,</span><span> Body</span><span class="token" style="color:#c5c8c6">,</span><span> Param </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@nestjs/common&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> ChatService </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;./chat.service&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span></span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">Controller</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;chat&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span></span><span class="token" style="color:#96CBFE">export</span><span> </span><span class="token" style="color:#96CBFE">class</span><span> </span><span class="token" style="color:#FFFFB6;text-decoration:underline">ChatController</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>  </span><span class="token" style="color:#DAD085">constructor</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#96CBFE">private</span><span> </span><span class="token" style="color:#96CBFE">readonly</span><span> chatService</span><span class="token" style="color:#EDEDED">:</span><span> ChatService</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span class="token" style="color:#c5c8c6">}</span><span>
</span>
<span>  </span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">Post</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;:userId&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span>  </span><span class="token" style="color:#96CBFE">async</span><span> </span><span class="token" style="color:#DAD085">chat</span><span class="token" style="color:#c5c8c6">(</span><span>
</span><span>    </span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">Param</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;userId&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span> userId</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">string</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">Body</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;message&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span> message</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">string</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>    </span><span class="token" style="color:#96CBFE">const</span><span> response </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#96CBFE">await</span><span> </span><span class="token" style="color:#96CBFE">this</span><span class="token" style="color:#c5c8c6">.</span><span>chatService</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">chat</span><span class="token" style="color:#c5c8c6">(</span><span>userId</span><span class="token" style="color:#c5c8c6">,</span><span> message</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>    </span><span class="token" style="color:#96CBFE">return</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>      content</span><span class="token" style="color:#EDEDED">:</span><span> response</span><span class="token" style="color:#c5c8c6">.</span><span>content</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>      toolCalls</span><span class="token" style="color:#EDEDED">:</span><span> response</span><span class="token" style="color:#c5c8c6">.</span><span>toolCalls</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>      metadata</span><span class="token" style="color:#EDEDED">:</span><span> response</span><span class="token" style="color:#c5c8c6">.</span><span>metadata</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span>
</span>
<span>  </span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">Post</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;:userId/stream&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span>  </span><span class="token" style="color:#96CBFE">async</span><span> </span><span class="token" style="color:#DAD085">stream</span><span class="token" style="color:#c5c8c6">(</span><span>
</span><span>    </span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">Param</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;userId&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span> userId</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">string</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">Body</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;message&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span> message</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">string</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>    </span><span class="token" style="color:#7C7C7C">// Implement streaming response</span><span>
</span><span>    </span><span class="token" style="color:#7C7C7C">// Use SSE or WebSocket for streaming</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span>
</span><span></span><span class="token" style="color:#c5c8c6">}</span></code></pre>
                  </div>
                </div>
                <h2>Custom Decorators</h2>
                <p>AgentSea provides decorators for common patterns:</p>
                <h3>@Agent Decorator</h3>
                <div
                  class="my-6 rounded-lg overflow-hidden shadow-lg bg-gray-900 border border-base-300 relative group"
                >
                  <div
                    class="flex items-center justify-between bg-base-300 px-4 py-2 border-b border-base-content/10"
                  >
                    <span
                      class="text-xs font-semibold text-base-content/60 uppercase"
                      >typescript</span
                    ><button
                      class="btn btn-xs btn-ghost gap-1 opacity-70 hover:opacity-100 transition-opacity"
                      title="Copy to clipboard"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-4 w-4"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                        ></path></svg
                      ><span>Copy</span>
                    </button>
                  </div>
                  <div class="overflow-x-auto">
                    <pre
                      style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1rem;margin:0;overflow:auto;border-radius:0.3em;background:transparent;font-size:0.875rem"
                    ><code style="white-space:pre;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace"><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> Injectable </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@nestjs/common&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> AgentDecorator </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@lov3kaizen/agentsea-nestjs&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span></span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">Injectable</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span></span><span class="token" style="color:#96CBFE">export</span><span> </span><span class="token" style="color:#96CBFE">class</span><span> </span><span class="token" style="color:#FFFFB6;text-decoration:underline">SupportService</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>  </span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">AgentDecorator</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>    name</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">&#x27;support-agent&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    systemPrompt</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">&#x27;You are a helpful customer support agent.&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span>  </span><span class="token" style="color:#96CBFE">async</span><span> </span><span class="token" style="color:#DAD085">handleSupport</span><span class="token" style="color:#c5c8c6">(</span><span>message</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">string</span><span class="token" style="color:#c5c8c6">,</span><span> userId</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">string</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>    </span><span class="token" style="color:#7C7C7C">// Method will be automatically wrapped with agent execution</span><span>
</span><span>    </span><span class="token" style="color:#96CBFE">return</span><span> message</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span>
</span><span></span><span class="token" style="color:#c5c8c6">}</span></code></pre>
                  </div>
                </div>
                <h3>@Tool Decorator</h3>
                <div
                  class="my-6 rounded-lg overflow-hidden shadow-lg bg-gray-900 border border-base-300 relative group"
                >
                  <div
                    class="flex items-center justify-between bg-base-300 px-4 py-2 border-b border-base-content/10"
                  >
                    <span
                      class="text-xs font-semibold text-base-content/60 uppercase"
                      >typescript</span
                    ><button
                      class="btn btn-xs btn-ghost gap-1 opacity-70 hover:opacity-100 transition-opacity"
                      title="Copy to clipboard"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-4 w-4"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                        ></path></svg
                      ><span>Copy</span>
                    </button>
                  </div>
                  <div class="overflow-x-auto">
                    <pre
                      style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1rem;margin:0;overflow:auto;border-radius:0.3em;background:transparent;font-size:0.875rem"
                    ><code style="white-space:pre;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace"><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> Injectable </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@nestjs/common&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> ToolDecorator </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@lov3kaizen/agentsea-nestjs&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> z </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;zod&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span></span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">Injectable</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span></span><span class="token" style="color:#96CBFE">export</span><span> </span><span class="token" style="color:#96CBFE">class</span><span> </span><span class="token" style="color:#FFFFB6;text-decoration:underline">DatabaseService</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>  </span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">ToolDecorator</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>    name</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">&#x27;query_users&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    description</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">&#x27;Query users from the database&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    inputSchema</span><span class="token" style="color:#EDEDED">:</span><span> z</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">object</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>      limit</span><span class="token" style="color:#EDEDED">:</span><span> z</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">number</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">default</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">10</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span>  </span><span class="token" style="color:#96CBFE">async</span><span> </span><span class="token" style="color:#DAD085">queryUsers</span><span class="token" style="color:#c5c8c6">(</span><span>input</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> limit</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">number</span><span> </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>    </span><span class="token" style="color:#96CBFE">const</span><span> users </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#96CBFE">await</span><span> </span><span class="token" style="color:#96CBFE">this</span><span class="token" style="color:#c5c8c6">.</span><span>db</span><span class="token" style="color:#c5c8c6">.</span><span>users</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">findMany</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>      take</span><span class="token" style="color:#EDEDED">:</span><span> input</span><span class="token" style="color:#c5c8c6">.</span><span>limit</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>    </span><span class="token" style="color:#96CBFE">return</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>      success</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#99CC99">true</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>      data</span><span class="token" style="color:#EDEDED">:</span><span> users</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>      count</span><span class="token" style="color:#EDEDED">:</span><span> users</span><span class="token" style="color:#c5c8c6">.</span><span>length</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span>
</span><span></span><span class="token" style="color:#c5c8c6">}</span></code></pre>
                  </div>
                </div>
                <h2>Guards and Interceptors</h2>
                <h3>Rate Limiting</h3>
                <div
                  class="my-6 rounded-lg overflow-hidden shadow-lg bg-gray-900 border border-base-300 relative group"
                >
                  <div
                    class="flex items-center justify-between bg-base-300 px-4 py-2 border-b border-base-content/10"
                  >
                    <span
                      class="text-xs font-semibold text-base-content/60 uppercase"
                      >typescript</span
                    ><button
                      class="btn btn-xs btn-ghost gap-1 opacity-70 hover:opacity-100 transition-opacity"
                      title="Copy to clipboard"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-4 w-4"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                        ></path></svg
                      ><span>Copy</span>
                    </button>
                  </div>
                  <div class="overflow-x-auto">
                    <pre
                      style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1rem;margin:0;overflow:auto;border-radius:0.3em;background:transparent;font-size:0.875rem"
                    ><code style="white-space:pre;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace"><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> Controller</span><span class="token" style="color:#c5c8c6">,</span><span> Post</span><span class="token" style="color:#c5c8c6">,</span><span> UseGuards </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@nestjs/common&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> RateLimitGuard</span><span class="token" style="color:#c5c8c6">,</span><span> RateLimit </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@lov3kaizen/agentsea-nestjs&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span></span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">Controller</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;chat&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span></span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">UseGuards</span><span class="token" style="color:#c5c8c6">(</span><span>RateLimitGuard</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span></span><span class="token" style="color:#96CBFE">export</span><span> </span><span class="token" style="color:#96CBFE">class</span><span> </span><span class="token" style="color:#FFFFB6;text-decoration:underline">ChatController</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>  </span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">Post</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span>  </span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">RateLimit</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span> maxRequests</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#FF73FD">10</span><span class="token" style="color:#c5c8c6">,</span><span> windowMs</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#FF73FD">60000</span><span> </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#7C7C7C">// 10 requests per minute</span><span>
</span><span>  </span><span class="token" style="color:#96CBFE">async</span><span> </span><span class="token" style="color:#DAD085">chat</span><span class="token" style="color:#c5c8c6">(</span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">Body</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;message&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span> message</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">string</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>    </span><span class="token" style="color:#96CBFE">return</span><span> </span><span class="token" style="color:#96CBFE">this</span><span class="token" style="color:#c5c8c6">.</span><span>chatService</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">chat</span><span class="token" style="color:#c5c8c6">(</span><span>message</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span>
</span><span></span><span class="token" style="color:#c5c8c6">}</span></code></pre>
                  </div>
                </div>
                <h3>Logging Interceptor</h3>
                <div
                  class="my-6 rounded-lg overflow-hidden shadow-lg bg-gray-900 border border-base-300 relative group"
                >
                  <div
                    class="flex items-center justify-between bg-base-300 px-4 py-2 border-b border-base-content/10"
                  >
                    <span
                      class="text-xs font-semibold text-base-content/60 uppercase"
                      >typescript</span
                    ><button
                      class="btn btn-xs btn-ghost gap-1 opacity-70 hover:opacity-100 transition-opacity"
                      title="Copy to clipboard"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-4 w-4"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                        ></path></svg
                      ><span>Copy</span>
                    </button>
                  </div>
                  <div class="overflow-x-auto">
                    <pre
                      style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1rem;margin:0;overflow:auto;border-radius:0.3em;background:transparent;font-size:0.875rem"
                    ><code style="white-space:pre;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace"><span class="token" style="color:#7C7C7C">// logging.interceptor.ts</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>  Injectable</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>  NestInterceptor</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>  ExecutionContext</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>  CallHandler</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span></span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@nestjs/common&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> Observable </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;rxjs&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> tap </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;rxjs/operators&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> Logger </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@lov3kaizen/agentsea-core&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span></span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">Injectable</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span></span><span class="token" style="color:#96CBFE">export</span><span> </span><span class="token" style="color:#96CBFE">class</span><span> </span><span class="token" style="color:#FFFFB6;text-decoration:underline">LoggingInterceptor</span><span> </span><span class="token" style="color:#96CBFE">implements</span><span> </span><span class="token" style="color:#FFFFB6;text-decoration:underline">NestInterceptor</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>  </span><span class="token" style="color:#96CBFE">private</span><span> </span><span class="token" style="color:#96CBFE">readonly</span><span> logger </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#96CBFE">new</span><span> </span><span class="token" style="color:#FFFFB6;text-decoration:underline">Logger</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>  </span><span class="token" style="color:#DAD085">intercept</span><span class="token" style="color:#c5c8c6">(</span><span>context</span><span class="token" style="color:#EDEDED">:</span><span> ExecutionContext</span><span class="token" style="color:#c5c8c6">,</span><span> next</span><span class="token" style="color:#EDEDED">:</span><span> CallHandler</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#EDEDED">:</span><span> Observable</span><span class="token" style="color:#EDEDED">&lt;</span><span class="token" style="color:#A8FF60">any</span><span class="token" style="color:#EDEDED">&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>    </span><span class="token" style="color:#96CBFE">const</span><span> request </span><span class="token" style="color:#EDEDED">=</span><span> context</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">switchToHttp</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">getRequest</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>    </span><span class="token" style="color:#96CBFE">const</span><span> startTime </span><span class="token" style="color:#EDEDED">=</span><span> Date</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">now</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>    </span><span class="token" style="color:#96CBFE">return</span><span> next</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">handle</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">pipe</span><span class="token" style="color:#c5c8c6">(</span><span>
</span><span>      </span><span class="token" style="color:#DAD085">tap</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>        </span><span class="token" style="color:#96CBFE">const</span><span> duration </span><span class="token" style="color:#EDEDED">=</span><span> Date</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">now</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#EDEDED">-</span><span> startTime</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>        </span><span class="token" style="color:#96CBFE">this</span><span class="token" style="color:#c5c8c6">.</span><span>logger</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">info</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;Request completed&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>          path</span><span class="token" style="color:#EDEDED">:</span><span> request</span><span class="token" style="color:#c5c8c6">.</span><span>url</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>          method</span><span class="token" style="color:#EDEDED">:</span><span> request</span><span class="token" style="color:#c5c8c6">.</span><span>method</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>          duration</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>        </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>      </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span>
</span><span></span><span class="token" style="color:#c5c8c6">}</span><span>
</span>
<span></span><span class="token" style="color:#7C7C7C">// app.module.ts</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> </span><span class="token" style="color:#99CC99">APP_INTERCEPTOR</span><span> </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@nestjs/core&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span></span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">Module</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>  providers</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span>
</span><span>    </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>      provide</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#99CC99">APP_INTERCEPTOR</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>      useClass</span><span class="token" style="color:#EDEDED">:</span><span> LoggingInterceptor</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span></span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span></span><span class="token" style="color:#96CBFE">export</span><span> </span><span class="token" style="color:#96CBFE">class</span><span> </span><span class="token" style="color:#FFFFB6;text-decoration:underline">AppModule</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span class="token" style="color:#c5c8c6">}</span></code></pre>
                  </div>
                </div>
                <h2>WebSocket Integration</h2>
                <p>Stream agent responses using WebSockets:</p>
                <div
                  class="my-6 rounded-lg overflow-hidden shadow-lg bg-gray-900 border border-base-300 relative group"
                >
                  <div
                    class="flex items-center justify-between bg-base-300 px-4 py-2 border-b border-base-content/10"
                  >
                    <span
                      class="text-xs font-semibold text-base-content/60 uppercase"
                      >typescript</span
                    ><button
                      class="btn btn-xs btn-ghost gap-1 opacity-70 hover:opacity-100 transition-opacity"
                      title="Copy to clipboard"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-4 w-4"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                        ></path></svg
                      ><span>Copy</span>
                    </button>
                  </div>
                  <div class="overflow-x-auto">
                    <pre
                      style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1rem;margin:0;overflow:auto;border-radius:0.3em;background:transparent;font-size:0.875rem"
                    ><code style="white-space:pre;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace"><span class="token" style="color:#7C7C7C">// chat.gateway.ts</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>  WebSocketGateway</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>  WebSocketServer</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>  SubscribeMessage</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>  MessageBody</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span></span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@nestjs/websockets&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> Server </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;socket.io&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> Agent </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@lov3kaizen/agentsea-core&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span></span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">WebSocketGateway</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span></span><span class="token" style="color:#96CBFE">export</span><span> </span><span class="token" style="color:#96CBFE">class</span><span> </span><span class="token" style="color:#FFFFB6;text-decoration:underline">ChatGateway</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>  </span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">WebSocketServer</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span>  server</span><span class="token" style="color:#EDEDED">:</span><span> Server</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>  </span><span class="token" style="color:#DAD085">constructor</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#96CBFE">private</span><span> </span><span class="token" style="color:#96CBFE">readonly</span><span> agent</span><span class="token" style="color:#EDEDED">:</span><span> Agent</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span class="token" style="color:#c5c8c6">}</span><span>
</span>
<span>  </span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">SubscribeMessage</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;chat&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span>  </span><span class="token" style="color:#96CBFE">async</span><span> </span><span class="token" style="color:#DAD085">handleChat</span><span class="token" style="color:#c5c8c6">(</span><span>
</span><span>    </span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">MessageBody</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> data</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> userId</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">string</span><span class="token" style="color:#c5c8c6">;</span><span> message</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">string</span><span> </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>    </span><span class="token" style="color:#96CBFE">const</span><span> stream </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#96CBFE">await</span><span> </span><span class="token" style="color:#96CBFE">this</span><span class="token" style="color:#c5c8c6">.</span><span>agent</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">stream</span><span class="token" style="color:#c5c8c6">(</span><span>data</span><span class="token" style="color:#c5c8c6">.</span><span>message</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>      conversationId</span><span class="token" style="color:#EDEDED">:</span><span> data</span><span class="token" style="color:#c5c8c6">.</span><span>userId</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>      sessionData</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> userId</span><span class="token" style="color:#EDEDED">:</span><span> data</span><span class="token" style="color:#c5c8c6">.</span><span>userId </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>      history</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>    </span><span class="token" style="color:#96CBFE">for</span><span> </span><span class="token" style="color:#96CBFE">await</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#96CBFE">const</span><span> chunk </span><span class="token" style="color:#96CBFE">of</span><span> stream</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>      </span><span class="token" style="color:#96CBFE">if</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>chunk</span><span class="token" style="color:#c5c8c6">.</span><span>type </span><span class="token" style="color:#EDEDED">===</span><span> </span><span class="token" style="color:#A8FF60">&#x27;content&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>        </span><span class="token" style="color:#96CBFE">this</span><span class="token" style="color:#c5c8c6">.</span><span>server</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">emit</span><span class="token" style="color:#c5c8c6">(</span><span class="token template-string template-punctuation" style="color:#A8FF60">`</span><span class="token template-string" style="color:#A8FF60">chat:</span><span class="token template-string interpolation interpolation-punctuation" style="color:#c5c8c6">${</span><span class="token template-string interpolation">data</span><span class="token template-string interpolation" style="color:#c5c8c6">.</span><span class="token template-string interpolation">userId</span><span class="token template-string interpolation interpolation-punctuation" style="color:#c5c8c6">}</span><span class="token template-string template-punctuation" style="color:#A8FF60">`</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>          type</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">&#x27;content&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>          content</span><span class="token" style="color:#EDEDED">:</span><span> chunk</span><span class="token" style="color:#c5c8c6">.</span><span>content</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>        </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>      </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">else</span><span> </span><span class="token" style="color:#96CBFE">if</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>chunk</span><span class="token" style="color:#c5c8c6">.</span><span>type </span><span class="token" style="color:#EDEDED">===</span><span> </span><span class="token" style="color:#A8FF60">&#x27;tool_call&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>        </span><span class="token" style="color:#96CBFE">this</span><span class="token" style="color:#c5c8c6">.</span><span>server</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">emit</span><span class="token" style="color:#c5c8c6">(</span><span class="token template-string template-punctuation" style="color:#A8FF60">`</span><span class="token template-string" style="color:#A8FF60">chat:</span><span class="token template-string interpolation interpolation-punctuation" style="color:#c5c8c6">${</span><span class="token template-string interpolation">data</span><span class="token template-string interpolation" style="color:#c5c8c6">.</span><span class="token template-string interpolation">userId</span><span class="token template-string interpolation interpolation-punctuation" style="color:#c5c8c6">}</span><span class="token template-string template-punctuation" style="color:#A8FF60">`</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>          type</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">&#x27;tool_call&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>          toolName</span><span class="token" style="color:#EDEDED">:</span><span> chunk</span><span class="token" style="color:#c5c8c6">.</span><span>toolName</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>        </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>      </span><span class="token" style="color:#c5c8c6">}</span><span>
</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span>
</span>
<span>    </span><span class="token" style="color:#96CBFE">this</span><span class="token" style="color:#c5c8c6">.</span><span>server</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">emit</span><span class="token" style="color:#c5c8c6">(</span><span class="token template-string template-punctuation" style="color:#A8FF60">`</span><span class="token template-string" style="color:#A8FF60">chat:</span><span class="token template-string interpolation interpolation-punctuation" style="color:#c5c8c6">${</span><span class="token template-string interpolation">data</span><span class="token template-string interpolation" style="color:#c5c8c6">.</span><span class="token template-string interpolation">userId</span><span class="token template-string interpolation interpolation-punctuation" style="color:#c5c8c6">}</span><span class="token template-string template-punctuation" style="color:#A8FF60">`</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> type</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">&#x27;done&#x27;</span><span> </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span>
</span><span></span><span class="token" style="color:#c5c8c6">}</span></code></pre>
                  </div>
                </div>
                <h2>Testing</h2>
                <h3>Unit Tests</h3>
                <div
                  class="my-6 rounded-lg overflow-hidden shadow-lg bg-gray-900 border border-base-300 relative group"
                >
                  <div
                    class="flex items-center justify-between bg-base-300 px-4 py-2 border-b border-base-content/10"
                  >
                    <span
                      class="text-xs font-semibold text-base-content/60 uppercase"
                      >typescript</span
                    ><button
                      class="btn btn-xs btn-ghost gap-1 opacity-70 hover:opacity-100 transition-opacity"
                      title="Copy to clipboard"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-4 w-4"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                        ></path></svg
                      ><span>Copy</span>
                    </button>
                  </div>
                  <div class="overflow-x-auto">
                    <pre
                      style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1rem;margin:0;overflow:auto;border-radius:0.3em;background:transparent;font-size:0.875rem"
                    ><code style="white-space:pre;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace"><span class="token" style="color:#7C7C7C">// chat.service.spec.ts</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> Test</span><span class="token" style="color:#c5c8c6">,</span><span> TestingModule </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@nestjs/testing&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> ChatService </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;./chat.service&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> Agent</span><span class="token" style="color:#c5c8c6">,</span><span> ToolRegistry</span><span class="token" style="color:#c5c8c6">,</span><span> BufferMemory </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@lov3kaizen/agentsea-core&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span></span><span class="token" style="color:#DAD085">describe</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;ChatService&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>  </span><span class="token" style="color:#96CBFE">let</span><span> service</span><span class="token" style="color:#EDEDED">:</span><span> ChatService</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>  </span><span class="token" style="color:#96CBFE">let</span><span> mockAgent</span><span class="token" style="color:#EDEDED">:</span><span> jest</span><span class="token" style="color:#c5c8c6">.</span><span>Mocked</span><span class="token" style="color:#EDEDED">&lt;</span><span>Agent</span><span class="token" style="color:#EDEDED">&gt;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>  </span><span class="token" style="color:#DAD085">beforeEach</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#96CBFE">async</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>    mockAgent </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>      execute</span><span class="token" style="color:#EDEDED">:</span><span> jest</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">fn</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">as</span><span> </span><span class="token" style="color:#A8FF60">any</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>    </span><span class="token" style="color:#96CBFE">const</span><span> module</span><span class="token" style="color:#EDEDED">:</span><span> TestingModule </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#96CBFE">await</span><span> Test</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">createTestingModule</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>      providers</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span>
</span><span>        ChatService</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>        </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>          provide</span><span class="token" style="color:#EDEDED">:</span><span> Agent</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>          useValue</span><span class="token" style="color:#EDEDED">:</span><span> mockAgent</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>        </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>        </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>          provide</span><span class="token" style="color:#EDEDED">:</span><span> ToolRegistry</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>          useValue</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#96CBFE">new</span><span> </span><span class="token" style="color:#FFFFB6;text-decoration:underline">ToolRegistry</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>        </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>        </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>          provide</span><span class="token" style="color:#EDEDED">:</span><span> BufferMemory</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>          useValue</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#96CBFE">new</span><span> </span><span class="token" style="color:#FFFFB6;text-decoration:underline">BufferMemory</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">50</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>        </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>      </span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">compile</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>    service </span><span class="token" style="color:#EDEDED">=</span><span> module</span><span class="token" style="color:#c5c8c6">.</span><span class="token generic-function" style="color:#DAD085">get</span><span class="token generic-function generic" style="color:#EDEDED;text-decoration:underline">&lt;</span><span class="token generic-function generic" style="color:#FFFFB6;text-decoration:underline">ChatService</span><span class="token generic-function generic" style="color:#EDEDED;text-decoration:underline">&gt;</span><span class="token" style="color:#c5c8c6">(</span><span>ChatService</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>  </span><span class="token" style="color:#DAD085">it</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;should handle chat messages&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#96CBFE">async</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>    mockAgent</span><span class="token" style="color:#c5c8c6">.</span><span>execute</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">mockResolvedValue</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>      content</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">&#x27;Hello!&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>      toolCalls</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>      metadata</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>    </span><span class="token" style="color:#96CBFE">const</span><span> result </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#96CBFE">await</span><span> service</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">chat</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;user-123&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#A8FF60">&#x27;Hi&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>    </span><span class="token" style="color:#DAD085">expect</span><span class="token" style="color:#c5c8c6">(</span><span>result</span><span class="token" style="color:#c5c8c6">.</span><span>content</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">toBe</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;Hello!&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>    </span><span class="token" style="color:#DAD085">expect</span><span class="token" style="color:#c5c8c6">(</span><span>mockAgent</span><span class="token" style="color:#c5c8c6">.</span><span>execute</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">toHaveBeenCalled</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span></code></pre>
                  </div>
                </div>
                <h3>E2E Tests</h3>
                <div
                  class="my-6 rounded-lg overflow-hidden shadow-lg bg-gray-900 border border-base-300 relative group"
                >
                  <div
                    class="flex items-center justify-between bg-base-300 px-4 py-2 border-b border-base-content/10"
                  >
                    <span
                      class="text-xs font-semibold text-base-content/60 uppercase"
                      >typescript</span
                    ><button
                      class="btn btn-xs btn-ghost gap-1 opacity-70 hover:opacity-100 transition-opacity"
                      title="Copy to clipboard"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-4 w-4"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                        ></path></svg
                      ><span>Copy</span>
                    </button>
                  </div>
                  <div class="overflow-x-auto">
                    <pre
                      style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1rem;margin:0;overflow:auto;border-radius:0.3em;background:transparent;font-size:0.875rem"
                    ><code style="white-space:pre;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace"><span class="token" style="color:#7C7C7C">// chat.e2e-spec.ts</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> Test</span><span class="token" style="color:#c5c8c6">,</span><span> TestingModule </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@nestjs/testing&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> INestApplication </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@nestjs/common&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#EDEDED">*</span><span> </span><span class="token" style="color:#96CBFE">as</span><span> request </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;supertest&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> AppModule </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;../src/app.module&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span></span><span class="token" style="color:#DAD085">describe</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;ChatController (e2e)&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>  </span><span class="token" style="color:#96CBFE">let</span><span> app</span><span class="token" style="color:#EDEDED">:</span><span> INestApplication</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>  </span><span class="token" style="color:#DAD085">beforeAll</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#96CBFE">async</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>    </span><span class="token" style="color:#96CBFE">const</span><span> moduleFixture</span><span class="token" style="color:#EDEDED">:</span><span> TestingModule </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#96CBFE">await</span><span> Test</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">createTestingModule</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>      imports</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span>AppModule</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">compile</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>    app </span><span class="token" style="color:#EDEDED">=</span><span> moduleFixture</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">createNestApplication</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>    </span><span class="token" style="color:#96CBFE">await</span><span> app</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">init</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>  </span><span class="token" style="color:#DAD085">afterAll</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#96CBFE">async</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>    </span><span class="token" style="color:#96CBFE">await</span><span> app</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">close</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>  </span><span class="token" style="color:#DAD085">it</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;/chat/:userId (POST)&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>    </span><span class="token" style="color:#96CBFE">return</span><span> </span><span class="token" style="color:#DAD085">request</span><span class="token" style="color:#c5c8c6">(</span><span>app</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">getHttpServer</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span>      </span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">post</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;/chat/user-123&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span>      </span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">send</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span> message</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">&#x27;Hello&#x27;</span><span> </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span>      </span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">expect</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">201</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span>      </span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">expect</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">(</span><span>res</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>        </span><span class="token" style="color:#DAD085">expect</span><span class="token" style="color:#c5c8c6">(</span><span>res</span><span class="token" style="color:#c5c8c6">.</span><span>body</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">toHaveProperty</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;content&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>        </span><span class="token" style="color:#DAD085">expect</span><span class="token" style="color:#c5c8c6">(</span><span>res</span><span class="token" style="color:#c5c8c6">.</span><span>body</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">toHaveProperty</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;metadata&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>      </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span></code></pre>
                  </div>
                </div>
                <h2>Production Deployment</h2>
                <h3>Health Checks</h3>
                <div
                  class="my-6 rounded-lg overflow-hidden shadow-lg bg-gray-900 border border-base-300 relative group"
                >
                  <div
                    class="flex items-center justify-between bg-base-300 px-4 py-2 border-b border-base-content/10"
                  >
                    <span
                      class="text-xs font-semibold text-base-content/60 uppercase"
                      >typescript</span
                    ><button
                      class="btn btn-xs btn-ghost gap-1 opacity-70 hover:opacity-100 transition-opacity"
                      title="Copy to clipboard"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-4 w-4"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                        ></path></svg
                      ><span>Copy</span>
                    </button>
                  </div>
                  <div class="overflow-x-auto">
                    <pre
                      style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1rem;margin:0;overflow:auto;border-radius:0.3em;background:transparent;font-size:0.875rem"
                    ><code style="white-space:pre;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace"><span class="token" style="color:#7C7C7C">// health.controller.ts</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> Controller</span><span class="token" style="color:#c5c8c6">,</span><span> Get </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@nestjs/common&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> HealthCheck</span><span class="token" style="color:#c5c8c6">,</span><span> HealthCheckService </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@nestjs/terminus&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> MCPRegistry </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@lov3kaizen/agentsea-core&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span></span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">Controller</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;health&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span></span><span class="token" style="color:#96CBFE">export</span><span> </span><span class="token" style="color:#96CBFE">class</span><span> </span><span class="token" style="color:#FFFFB6;text-decoration:underline">HealthController</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>  </span><span class="token" style="color:#DAD085">constructor</span><span class="token" style="color:#c5c8c6">(</span><span>
</span><span>    </span><span class="token" style="color:#96CBFE">private</span><span> health</span><span class="token" style="color:#EDEDED">:</span><span> HealthCheckService</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token" style="color:#96CBFE">private</span><span> mcpRegistry</span><span class="token" style="color:#EDEDED">:</span><span> MCPRegistry</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span class="token" style="color:#c5c8c6">}</span><span>
</span>
<span>  </span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">Get</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span>  </span><span class="token decorator at" style="color:#EDEDED">@</span><span class="token decorator" style="color:#DAD085">HealthCheck</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span>
</span><span>  </span><span class="token" style="color:#DAD085">check</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>    </span><span class="token" style="color:#96CBFE">return</span><span> </span><span class="token" style="color:#96CBFE">this</span><span class="token" style="color:#c5c8c6">.</span><span>health</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">check</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">[</span><span>
</span><span>      </span><span class="token" style="color:#96CBFE">async</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>        </span><span class="token" style="color:#96CBFE">const</span><span> clients </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#96CBFE">this</span><span class="token" style="color:#c5c8c6">.</span><span>mcpRegistry</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">getClients</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>        </span><span class="token" style="color:#96CBFE">const</span><span> connected </span><span class="token" style="color:#EDEDED">=</span><span> clients</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">every</span><span class="token" style="color:#c5c8c6">(</span><span>c </span><span class="token" style="color:#EDEDED">=&gt;</span><span> c</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">isConnected</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>        </span><span class="token" style="color:#96CBFE">return</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>          mcp</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>            status</span><span class="token" style="color:#EDEDED">:</span><span> connected </span><span class="token" style="color:#EDEDED">?</span><span> </span><span class="token" style="color:#A8FF60">&#x27;up&#x27;</span><span> </span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#A8FF60">&#x27;down&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>            servers</span><span class="token" style="color:#EDEDED">:</span><span> clients</span><span class="token" style="color:#c5c8c6">.</span><span>length</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>          </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>        </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>      </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span><span>    </span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span>
</span><span></span><span class="token" style="color:#c5c8c6">}</span></code></pre>
                  </div>
                </div>
                <h3>Graceful Shutdown</h3>
                <div
                  class="my-6 rounded-lg overflow-hidden shadow-lg bg-gray-900 border border-base-300 relative group"
                >
                  <div
                    class="flex items-center justify-between bg-base-300 px-4 py-2 border-b border-base-content/10"
                  >
                    <span
                      class="text-xs font-semibold text-base-content/60 uppercase"
                      >typescript</span
                    ><button
                      class="btn btn-xs btn-ghost gap-1 opacity-70 hover:opacity-100 transition-opacity"
                      title="Copy to clipboard"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-4 w-4"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                        ></path></svg
                      ><span>Copy</span>
                    </button>
                  </div>
                  <div class="overflow-x-auto">
                    <pre
                      style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1rem;margin:0;overflow:auto;border-radius:0.3em;background:transparent;font-size:0.875rem"
                    ><code style="white-space:pre;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace"><span class="token" style="color:#7C7C7C">// main.ts</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> NestFactory </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@nestjs/core&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> AppModule </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;./app.module&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> MCPRegistry </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@lov3kaizen/agentsea-core&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span></span><span class="token" style="color:#96CBFE">async</span><span> </span><span class="token" style="color:#96CBFE">function</span><span> </span><span class="token" style="color:#DAD085">bootstrap</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>  </span><span class="token" style="color:#96CBFE">const</span><span> app </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#96CBFE">await</span><span> NestFactory</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">create</span><span class="token" style="color:#c5c8c6">(</span><span>AppModule</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>  </span><span class="token" style="color:#7C7C7C">// Enable graceful shutdown</span><span>
</span><span>  app</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">enableShutdownHooks</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>  </span><span class="token" style="color:#7C7C7C">// Cleanup on shutdown</span><span>
</span><span>  app</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">get</span><span class="token" style="color:#c5c8c6">(</span><span>MCPRegistry</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">on</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;beforeShutdown&#x27;</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#96CBFE">async</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span><span>    </span><span class="token" style="color:#96CBFE">const</span><span> mcpRegistry </span><span class="token" style="color:#EDEDED">=</span><span> app</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">get</span><span class="token" style="color:#c5c8c6">(</span><span>MCPRegistry</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>    </span><span class="token" style="color:#96CBFE">await</span><span> mcpRegistry</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">disconnectAll</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span>
<span>  </span><span class="token" style="color:#96CBFE">await</span><span> app</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">listen</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">3000</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span><span></span><span class="token" style="color:#c5c8c6">}</span><span>
</span>
<span></span><span class="token" style="color:#DAD085">bootstrap</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span></code></pre>
                  </div>
                </div>
                <h2>Best Practices</h2>
                <ul>
                  <li>
                    <strong>Dependency Injection</strong>: Use NestJS DI for all
                    AgentSea components
                  </li>
                  <li>
                    <strong>Configuration</strong>: Use ConfigModule for
                    environment-specific settings
                  </li>
                  <li>
                    <strong>Error Handling</strong>: Implement global exception
                    filters
                  </li>
                  <li>
                    <strong>Validation</strong>: Use class-validator for DTO
                    validation
                  </li>
                  <li>
                    <strong>Guards</strong>: Implement authentication and
                    authorization guards
                  </li>
                  <li>
                    <strong>Testing</strong>: Write comprehensive unit and e2e
                    tests
                  </li>
                  <li>
                    <strong>Monitoring</strong>: Integrate with monitoring
                    services
                  </li>
                  <li>
                    <strong>Documentation</strong>: Use Swagger/OpenAPI for API
                    documentation
                  </li>
                </ul>
                <h2>Next Steps</h2>
                <ul>
                  <li><a href="/docs/agents/">Learn about Agents</a></li>
                  <li><a href="/docs/observability/">Add Monitoring</a></li>
                  <li><a href="/examples/">View NestJS Examples</a></li>
                </ul>
              </div>
            </div>
          </div>
          <!--$--><!--/$-->
        </main>
        <footer class="footer footer-center bg-base-200 text-base-content p-10">
          <nav class="grid grid-flow-col gap-4">
            <a class="link link-hover" href="/docs/voice/">Voice Features</a
            ><a class="link link-hover" href="/docs/local-models/"
              >Local Models</a
            ><a class="link link-hover" href="/docs/cli/">CLI Tool</a
            ><a class="link link-hover" href="/api/">REST API</a>
          </nav>
          <nav class="grid grid-flow-col gap-4">
            <a
              href="https://github.com/lovekaizen/agentsea"
              class="link link-hover"
              >GitHub</a
            ><a
              href="https://github.com/lovekaizen/agentsea/discussions"
              class="link link-hover"
              >Discussions</a
            ><a
              href="https://github.com/lovekaizen/agentsea/issues"
              class="link link-hover"
              >Issues</a
            >
          </nav>
          <aside><p> 2025 AgentSea ADK. MIT License.</p></aside>
        </footer>
      </div>
      <div class="drawer-side border border-r-1 border-y-0 border-l-0">
        <label for="main-drawer" class="drawer-overlay"></label>
        <aside class="bg-base-200 min-h-full w-80">
          <ul class="menu p-4">
            <li>
              <h2 class="menu-title">Getting Started</h2>
              <ul>
                <li class="pl-2">
                  <a class="active:text-white" href="/">Home</a>
                </li>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/">Documentation</a>
                </li>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/installation/"
                    >Installation</a
                  >
                </li>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/quick-start/"
                    >Quick Start</a
                  >
                </li>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/cli/">CLI Tool</a>
                </li>
              </ul>
            </li>
            <li>
              <h2 class="menu-title">Core Concepts</h2>
              <ul>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/agents/">Agents</a>
                </li>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/providers/"
                    >Providers</a
                  >
                </li>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/local-providers/"
                    >Local Providers</a
                  >
                </li>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/tools/">Tools</a>
                </li>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/workflows/"
                    >Workflows</a
                  >
                </li>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/memory/">Memory</a>
                </li>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/formatting/"
                    >Content Formatting</a
                  >
                </li>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/conversation/"
                    >Conversation</a
                  >
                </li>
              </ul>
            </li>
            <li>
              <h2 class="menu-title">Features</h2>
              <ul>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/voice/"
                    >Voice (TTS/STT)</a
                  >
                </li>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/local-models/"
                    >Local Models</a
                  >
                </li>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/acp-integration/"
                    >ACP Commerce</a
                  >
                </li>
                <li class="pl-2">
                  <a class="active:text-white" href="/api/"
                    >REST API &amp; Streaming</a
                  >
                </li>
              </ul>
            </li>
            <li>
              <h2 class="menu-title">MCP Integration</h2>
              <ul>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/mcp-overview/"
                    >Overview</a
                  >
                </li>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/mcp-servers/"
                    >MCP Servers</a
                  >
                </li>
              </ul>
            </li>
            <li>
              <h2 class="menu-title">Advanced</h2>
              <ul>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/multi-tenancy/"
                    >Multi-Tenancy</a
                  >
                </li>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/observability/"
                    >Observability</a
                  >
                </li>
                <li class="pl-2">
                  <a class="active:text-white" href="/docs/nestjs/"
                    >NestJS Integration</a
                  >
                </li>
              </ul>
            </li>
            <li>
              <h2 class="menu-title">Resources</h2>
              <ul>
                <li class="pl-2">
                  <a class="active:text-white" href="/examples/">Examples</a>
                </li>
              </ul>
            </li>
          </ul>
        </aside>
      </div>
    </div>
    <script
      src="/_next/static/chunks/webpack-1b7e2f9af6e0232d.js"
      id="_R_"
      async=""
    ></script>
    <script>
      (self.__next_f = self.__next_f || []).push([0]);
    </script>
    <script>
      self.__next_f.push([
        1,
        '1:"$Sreact.fragment"\n2:I[1275,["619","static/chunks/619-ba102abea3e3d0e4.js","543","static/chunks/543-a0960cd7f2b1c22c.js","177","static/chunks/app/layout-b0f860a3d9150669.js"],"default"]\n3:I[9766,[],""]\n4:I[8924,[],""]\n5:I[8467,["619","static/chunks/619-ba102abea3e3d0e4.js","501","static/chunks/501-26489c9c153fdafc.js","720","static/chunks/app/docs/nestjs/page-1661e6a98b49e8b6.js"],"CodeBlock"]\n2a:I[7150,[],""]\n:HL["/_next/static/media/e4af272ccee01ff0-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]\n:HL["/_next/static/css/7e7d96b1e6991756.css","style"]\n:HL["/_next/static/css/1145ad3a91ffb5c9.css","style"]\n:HL["/_next/static/css/7a622664f4c377b7.css","style"]\n',
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        '0:{"P":null,"b":"BR2GXXFimfBinRJoMr3YY","p":"","c":["","docs","nestjs",""],"i":false,"f":[[["",{"children":["docs",{"children":["nestjs",{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/7e7d96b1e6991756.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/1145ad3a91ffb5c9.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","2",{"rel":"stylesheet","href":"/_next/static/css/7a622664f4c377b7.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","data-theme":"cmyk","children":["$","body",null,{"className":"__className_f367f3","children":["$","$L2",null,{"children":["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\\"Segoe UI\\",Roboto,Helvetica,Arial,sans-serif,\\"Apple Color Emoji\\",\\"Segoe UI Emoji\\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]}]}]]}],{"children":["docs",["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["nestjs",["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":[["$","div",null,{"className":"min-h-screen bg-base-100","children":["$","div",null,{"className":"container mx-auto px-6 py-12 max-w-5xl ","children":[["$","div",null,{"className":"mb-12","children":[["$","h1",null,{"className":"text-5xl font-bold mb-4","children":"NestJS Integration"}],["$","p",null,{"className":"text-xl text-base-content/70","children":"Seamlessly integrate AgentSea  with NestJS using decorators, modules, and dependency injection for building enterprise-grade agentic applications."}]]}],["$","div",null,{"className":"prose max-w-none","children":[["$","h2",null,{"children":"Installation"}],["$","p",null,{"children":"Install both core and NestJS packages:"}],["$","$L5",null,{"language":"bash","children":"# Install packages\\npnpm add @lov3kaizen/agentsea-core @lov3kaizen/agentsea-nestjs\\n\\n# Install NestJS dependencies\\npnpm add @nestjs/common @nestjs/core reflect-metadata rxjs"}],["$","h2",null,{"children":"Module Setup"}],["$","p",null,{"children":"Configure the AgentSea  module in your NestJS application:"}],["$","$L5",null,{"language":"typescript","children":"// app.module.ts\\nimport { Module } from \'@nestjs/common\';\\nimport { AgenticModule } from \'@lov3kaizen/agentsea-nestjs\';\\nimport { AnthropicProvider } from \'@lov3kaizen/agentsea-core\';\\n\\n@Module({\\n  imports: [\\n    AgenticModule.forRoot({\\n      provider: new AnthropicProvider(process.env.ANTHROPIC_API_KEY),\\n      defaultConfig: {\\n        model: \'claude-sonnet-4-20250514\',\\n        provider: \'anthropic\',\\n        temperature: 0.7,\\n        maxTokens: 2048,\\n      },\\n    }),\\n  ],\\n})\\nexport class AppModule {}"}],["$","h3",null,{"children":"Async Configuration"}],["$","p",null,{"children":"Use async configuration for dynamic setup:"}],["$","$L5",null,{"language":"typescript","children":"// app.module.ts\\nimport { Module } from \'@nestjs/common\';\\nimport { ConfigModule, ConfigService } from \'@nestjs/config\';\\nimport { AgenticModule } from \'@lov3kaizen/agentsea-nestjs\';\\nimport { AnthropicProvider } from \'@lov3kaizen/agentsea-core\';\\n\\n@Module({\\n  imports: [\\n    ConfigModule.forRoot(),\\n    AgenticModule.forRootAsync({\\n      imports: [ConfigModule],\\n      inject: [ConfigService],\\n      useFactory: async (config: ConfigService) =\u003e ({\\n        provider: new AnthropicProvider(config.get(\'ANTHROPIC_API_KEY\')),\\n        defaultConfig: {\\n          model: config.get(\'AGENT_MODEL\', \'claude-sonnet-4-20250514\'),\\n          provider: \'anthropic\',\\n          temperature: Number(config.get(\'AGENT_TEMPERATURE\', 0.7)),\\n        },\\n      }),\\n    }),\\n  ],\\n})\\nexport class AppModule {}"}],"$L6","$L7","$L8","$L9","$La","$Lb","$Lc","$Ld","$Le","$Lf","$L10","$L11","$L12","$L13","$L14","$L15","$L16","$L17","$L18","$L19","$L1a","$L1b","$L1c","$L1d","$L1e","$L1f","$L20","$L21","$L22","$L23","$L24","$L25","$L26","$L27"]}]]}]}],null,"$L28"]}],{},null,false]},null,false]},null,false]},null,false],"$L29",false]],"m":"$undefined","G":["$2a",[]],"s":false,"S":true}\n',
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        '2d:I[2619,["619","static/chunks/619-ba102abea3e3d0e4.js","501","static/chunks/501-26489c9c153fdafc.js","720","static/chunks/app/docs/nestjs/page-1661e6a98b49e8b6.js"],""]\n2e:I[4431,[],"OutletBoundary"]\n30:I[5278,[],"AsyncMetadataOutlet"]\n32:I[4431,[],"ViewportBoundary"]\n34:I[4431,[],"MetadataBoundary"]\n35:"$Sreact.suspense"\n6:["$","h2",null,{"children":"Agent Service"}]\n7:["$","p",null,{"children":"Create an agent service using dependency injection:"}]\n',
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        '8:["$","$L5",null,{"language":"typescript","children":"// chat.service.ts\\nimport { Injectable } from \'@nestjs/common\';\\nimport { Agent, ToolRegistry, BufferMemory } from \'@lov3kaizen/agentsea-core\';\\nimport { InjectAgent } from \'@lov3kaizen/agentsea-nestjs\';\\n\\n@Injectable()\\nexport class ChatService {\\n  constructor(\\n    @InjectAgent() private readonly agent: Agent,\\n    private readonly toolRegistry: ToolRegistry,\\n    private readonly memory: BufferMemory,\\n  ) {}\\n\\n  async chat(userId: string, message: string) {\\n    const response = await this.agent.execute(message, {\\n      conversationId: userId,\\n      sessionData: { userId },\\n      history: await this.memory.load(userId),\\n    });\\n\\n    await this.memory.save(userId, [\\n      ...await this.memory.load(userId),\\n      { role: \'user\', content: message },\\n      { role: \'assistant\', content: response.content },\\n    ]);\\n\\n    return response;\\n  }\\n}"}]\n',
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        '9:["$","h2",null,{"children":"Agent Controller"}]\na:["$","p",null,{"children":"Create REST endpoints for your agents:"}]\n',
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        "b:[\"$\",\"$L5\",null,{\"language\":\"typescript\",\"children\":\"// chat.controller.ts\\nimport { Controller, Post, Body, Param } from '@nestjs/common';\\nimport { ChatService } from './chat.service';\\n\\n@Controller('chat')\\nexport class ChatController {\\n  constructor(private readonly chatService: ChatService) {}\\n\\n  @Post(':userId')\\n  async chat(\\n    @Param('userId') userId: string,\\n    @Body('message') message: string,\\n  ) {\\n    const response = await this.chatService.chat(userId, message);\\n\\n    return {\\n      content: response.content,\\n      toolCalls: response.toolCalls,\\n      metadata: response.metadata,\\n    };\\n  }\\n\\n  @Post(':userId/stream')\\n  async stream(\\n    @Param('userId') userId: string,\\n    @Body('message') message: string,\\n  ) {\\n    // Implement streaming response\\n    // Use SSE or WebSocket for streaming\\n  }\\n}\"}]\n",
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        'c:["$","h2",null,{"children":"Custom Decorators"}]\nd:["$","p",null,{"children":"AgentSea  provides decorators for common patterns:"}]\ne:["$","h3",null,{"children":"@Agent Decorator"}]\nf:["$","$L5",null,{"language":"typescript","children":"import { Injectable } from \'@nestjs/common\';\\nimport { AgentDecorator } from \'@lov3kaizen/agentsea-nestjs\';\\n\\n@Injectable()\\nexport class SupportService {\\n  @AgentDecorator({\\n    name: \'support-agent\',\\n    systemPrompt: \'You are a helpful customer support agent.\',\\n  })\\n  async handleSupport(message: string, userId: string) {\\n    // Method will be automatically wrapped with agent execution\\n    return message;\\n  }\\n}"}]\n10:["$","h3",null,{"children":"@Tool Decorator"}]\n11:["$","$L5",null,{"language":"typescript","children":"import { Injectable } from \'@nestjs/common\';\\nimport { ToolDecorator } from \'@lov3kaizen/agentsea-nestjs\';\\nimport { z } from \'zod\';\\n\\n@Injectable()\\nexport class DatabaseService {\\n  @ToolDecorator({\\n    name: \'query_users\',\\n    description: \'Query users from the database\',\\n    inputSchema: z.object({\\n      limit: z.number().default(10),\\n    }),\\n  })\\n  async queryUsers(input: { limit: number }) {\\n    const users = await this.db.users.findMany({\\n      take: input.limit,\\n    });\\n\\n    return {\\n      success: true,\\n      data: users,\\n      count: users.length,\\n    };\\n  }\\n}"}]\n12:["$","h2",null,{"children":"Guards and Interceptors"}]\n13:["$","h3",null,{"children":"Rate Limiting"}]\n14:["$","$L5",null,{"language":"typescript","children":"import { Controller, Post, UseGuards } from \'@nestjs/common\';\\nimport { RateLimitGuard, RateLimit } from \'@lov3kaizen/agentsea-nestjs\';\\n\\n@Controller(\'chat\')\\n@UseGuards(RateLimitGuard)\\nexport class ChatController {\\n  @Post()\\n  @RateLimit({ maxRequests: 10, windowMs: 60000 }) // 10 requests per minute\\n  async chat(@Body(\'message\') message: string) {\\n    return this.chatService.chat(message);\\n  }\\n}"}]\n15:["$","h3",null,{"children":"Logging Interceptor"}]\n',
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        '16:["$","$L5",null,{"language":"typescript","children":"// logging.interceptor.ts\\nimport {\\n  Injectable,\\n  NestInterceptor,\\n  ExecutionContext,\\n  CallHandler,\\n} from \'@nestjs/common\';\\nimport { Observable } from \'rxjs\';\\nimport { tap } from \'rxjs/operators\';\\nimport { Logger } from \'@lov3kaizen/agentsea-core\';\\n\\n@Injectable()\\nexport class LoggingInterceptor implements NestInterceptor {\\n  private readonly logger = new Logger();\\n\\n  intercept(context: ExecutionContext, next: CallHandler): Observable\u003cany\u003e {\\n    const request = context.switchToHttp().getRequest();\\n    const startTime = Date.now();\\n\\n    return next.handle().pipe(\\n      tap(() =\u003e {\\n        const duration = Date.now() - startTime;\\n        this.logger.info(\'Request completed\', {\\n          path: request.url,\\n          method: request.method,\\n          duration,\\n        });\\n      }),\\n    );\\n  }\\n}\\n\\n// app.module.ts\\nimport { APP_INTERCEPTOR } from \'@nestjs/core\';\\n\\n@Module({\\n  providers: [\\n    {\\n      provide: APP_INTERCEPTOR,\\n      useClass: LoggingInterceptor,\\n    },\\n  ],\\n})\\nexport class AppModule {}"}]\n',
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        '17:["$","h2",null,{"children":"WebSocket Integration"}]\n18:["$","p",null,{"children":"Stream agent responses using WebSockets:"}]\n2b:T43b,',
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        "// chat.gateway.ts\nimport {\n  WebSocketGateway,\n  WebSocketServer,\n  SubscribeMessage,\n  MessageBody,\n} from '@nestjs/websockets';\nimport { Server } from 'socket.io';\nimport { Agent } from '@lov3kaizen/agentsea-core';\n\n@WebSocketGateway()\nexport class ChatGateway {\n  @WebSocketServer()\n  server: Server;\n\n  constructor(private readonly agent: Agent) {}\n\n  @SubscribeMessage('chat')\n  async handleChat(\n    @MessageBody() data: { userId: string; message: string },\n  ) {\n    const stream = await this.agent.stream(data.message, {\n      conversationId: data.userId,\n      sessionData: { userId: data.userId },\n      history: [],\n    });\n\n    for await (const chunk of stream) {\n      if (chunk.type === 'content') {\n        this.server.emit(`chat:${data.userId}`, {\n          type: 'content',\n          content: chunk.content,\n        });\n      } else if (chunk.type === 'tool_call') {\n        this.server.emit(`chat:${data.userId}`, {\n          type: 'tool_call',\n          toolName: chunk.toolName,\n        });\n      }\n    }\n\n    this.server.emit(`chat:${data.userId}`, { type: 'done' });\n  }\n}",
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        '19:["$","$L5",null,{"language":"typescript","children":"$2b"}]\n1a:["$","h2",null,{"children":"Testing"}]\n1b:["$","h3",null,{"children":"Unit Tests"}]\n2c:T48e,',
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        "// chat.service.spec.ts\nimport { Test, TestingModule } from '@nestjs/testing';\nimport { ChatService } from './chat.service';\nimport { Agent, ToolRegistry, BufferMemory } from '@lov3kaizen/agentsea-core';\n\ndescribe('ChatService', () =\u003e {\n  let service: ChatService;\n  let mockAgent: jest.Mocked\u003cAgent\u003e;\n\n  beforeEach(async () =\u003e {\n    mockAgent = {\n      execute: jest.fn(),\n    } as any;\n\n    const module: TestingModule = await Test.createTestingModule({\n      providers: [\n        ChatService,\n        {\n          provide: Agent,\n          useValue: mockAgent,\n        },\n        {\n          provide: ToolRegistry,\n          useValue: new ToolRegistry(),\n        },\n        {\n          provide: BufferMemory,\n          useValue: new BufferMemory(50),\n        },\n      ],\n    }).compile();\n\n    service = module.get\u003cChatService\u003e(ChatService);\n  });\n\n  it('should handle chat messages', async () =\u003e {\n    mockAgent.execute.mockResolvedValue({\n      content: 'Hello!',\n      toolCalls: [],\n      metadata: {},\n    });\n\n    const result = await service.chat('user-123', 'Hi');\n\n    expect(result.content).toBe('Hello!');\n    expect(mockAgent.execute).toHaveBeenCalled();\n  });\n});",
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        '1c:["$","$L5",null,{"language":"typescript","children":"$2c"}]\n1d:["$","h3",null,{"children":"E2E Tests"}]\n',
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        "1e:[\"$\",\"$L5\",null,{\"language\":\"typescript\",\"children\":\"// chat.e2e-spec.ts\\nimport { Test, TestingModule } from '@nestjs/testing';\\nimport { INestApplication } from '@nestjs/common';\\nimport * as request from 'supertest';\\nimport { AppModule } from '../src/app.module';\\n\\ndescribe('ChatController (e2e)', () =\u003e {\\n  let app: INestApplication;\\n\\n  beforeAll(async () =\u003e {\\n    const moduleFixture: TestingModule = await Test.createTestingModule({\\n      imports: [AppModule],\\n    }).compile();\\n\\n    app = moduleFixture.createNestApplication();\\n    await app.init();\\n  });\\n\\n  afterAll(async () =\u003e {\\n    await app.close();\\n  });\\n\\n  it('/chat/:userId (POST)', () =\u003e {\\n    return request(app.getHttpServer())\\n      .post('/chat/user-123')\\n      .send({ message: 'Hello' })\\n      .expect(201)\\n      .expect((res) =\u003e {\\n        expect(res.body).toHaveProperty('content');\\n        expect(res.body).toHaveProperty('metadata');\\n      });\\n  });\\n});\"}]\n",
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        '1f:["$","h2",null,{"children":"Production Deployment"}]\n20:["$","h3",null,{"children":"Health Checks"}]\n',
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        '21:["$","$L5",null,{"language":"typescript","children":"// health.controller.ts\\nimport { Controller, Get } from \'@nestjs/common\';\\nimport { HealthCheck, HealthCheckService } from \'@nestjs/terminus\';\\nimport { MCPRegistry } from \'@lov3kaizen/agentsea-core\';\\n\\n@Controller(\'health\')\\nexport class HealthController {\\n  constructor(\\n    private health: HealthCheckService,\\n    private mcpRegistry: MCPRegistry,\\n  ) {}\\n\\n  @Get()\\n  @HealthCheck()\\n  check() {\\n    return this.health.check([\\n      async () =\u003e {\\n        const clients = this.mcpRegistry.getClients();\\n        const connected = clients.every(c =\u003e c.isConnected());\\n\\n        return {\\n          mcp: {\\n            status: connected ? \'up\' : \'down\',\\n            servers: clients.length,\\n          },\\n        };\\n      },\\n    ]);\\n  }\\n}"}]\n',
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        '22:["$","h3",null,{"children":"Graceful Shutdown"}]\n23:["$","$L5",null,{"language":"typescript","children":"// main.ts\\nimport { NestFactory } from \'@nestjs/core\';\\nimport { AppModule } from \'./app.module\';\\nimport { MCPRegistry } from \'@lov3kaizen/agentsea-core\';\\n\\nasync function bootstrap() {\\n  const app = await NestFactory.create(AppModule);\\n\\n  // Enable graceful shutdown\\n  app.enableShutdownHooks();\\n\\n  // Cleanup on shutdown\\n  app.get(MCPRegistry).on(\'beforeShutdown\', async () =\u003e {\\n    const mcpRegistry = app.get(MCPRegistry);\\n    await mcpRegistry.disconnectAll();\\n  });\\n\\n  await app.listen(3000);\\n}\\n\\nbootstrap();"}]\n24:["$","h2",null,{"children":"Best Practices"}]\n',
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        '25:["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"Dependency Injection"}],": Use NestJS DI for all AgentSea  components"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Configuration"}],": Use ConfigModule for environment-specific settings"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Error Handling"}],": Implement global exception filters"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Validation"}],": Use class-validator for DTO validation"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Guards"}],": Implement authentication and authorization guards"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Testing"}],": Write comprehensive unit and e2e tests"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Monitoring"}],": Integrate with monitoring services"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Documentation"}],": Use Swagger/OpenAPI for API documentation"]}]]}]\n',
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        '26:["$","h2",null,{"children":"Next Steps"}]\n27:["$","ul",null,{"children":[["$","li",null,{"children":["$","$L2d",null,{"href":"/docs/agents","children":"Learn about Agents"}]}],["$","li",null,{"children":["$","$L2d",null,{"href":"/docs/observability","children":"Add Monitoring"}]}],["$","li",null,{"children":["$","$L2d",null,{"href":"/examples","children":"View NestJS Examples"}]}]]}]\n28:["$","$L2e",null,{"children":["$L2f",["$","$L30",null,{"promise":"$@31"}]]}]\n29:["$","$1","h",{"children":[null,[["$","$L32",null,{"children":"$L33"}],["$","meta",null,{"name":"next-size-adjust","content":""}]],["$","$L34",null,{"children":["$","div",null,{"hidden":true,"children":["$","$35",null,{"fallback":null,"children":"$L36"}]}]}]]}]\n',
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        '33:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]\n2f:null\n',
      ]);
    </script>
    <script>
      self.__next_f.push([
        1,
        '31:{"metadata":[["$","title","0",{"children":"AgentSea - Unite and Orchestrate AI Agents"}],["$","meta","1",{"name":"description","content":"Build powerful agentic AI applications with AgentSea. Unite AI agents and services with multi-provider support, workflow orchestration, MCP protocol, and enterprise-grade observability."}]],"error":null,"digest":"$undefined"}\n',
      ]);
    </script>
    <script>
      self.__next_f.push([1, '36:"$31:metadata"\n']);
    </script>
  </body>
</html>
