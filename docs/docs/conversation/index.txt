1:"$Sreact.fragment"
2:I[1275,["619","static/chunks/619-ba102abea3e3d0e4.js","543","static/chunks/543-a0960cd7f2b1c22c.js","177","static/chunks/app/layout-b0f860a3d9150669.js"],"default"]
3:I[9766,[],""]
4:I[8924,[],""]
5:I[8467,["619","static/chunks/619-ba102abea3e3d0e4.js","501","static/chunks/501-26489c9c153fdafc.js","838","static/chunks/app/docs/conversation/page-1661e6a98b49e8b6.js"],"CodeBlock"]
25:I[7150,[],""]
:HL["/_next/static/media/e4af272ccee01ff0-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/7e7d96b1e6991756.css","style"]
:HL["/_next/static/css/1145ad3a91ffb5c9.css","style"]
:HL["/_next/static/css/7a622664f4c377b7.css","style"]
6:T7d0,import {
  ConversationSchema,
  ConversationSchemaBuilder,
  Agent,
  AnthropicProvider,
  ToolRegistry,
} from '@lov3kaizen/agentsea-core';
import { z } from 'zod';

// Define conversation schema
const bookingSchema = new ConversationSchema({
  name: 'hotel-booking',
  description: 'Hotel reservation conversation',
  startStep: 'destination',
  steps: [
    {
      id: 'destination',
      prompt: 'Where would you like to stay?',
      schema: z.object({
        city: z.string().min(2),
      }),
      next: 'dates',
    },
    {
      id: 'dates',
      prompt: 'What are your check-in and check-out dates?',
      schema: z.object({
        checkIn: z.string().regex(/^\d{4}-\d{2}-\d{2}$/),
        checkOut: z.string().regex(/^\d{4}-\d{2}-\d{2}$/),
      }),
      validation: (response) => {
        const checkIn = new Date(response.checkIn);
        const checkOut = new Date(response.checkOut);
        return checkOut > checkIn;
      },
      errorMessage: 'Check-out must be after check-in',
      next: 'guests',
    },
    {
      id: 'guests',
      prompt: 'How many guests?',
      schema: z.object({
        adults: z.number().min(1).max(10),
        children: z.number().min(0).max(5),
      }),
      next: 'confirm',
    },
    {
      id: 'confirm',
      prompt: 'Please review your booking details and confirm.',
      onComplete: async (response, state) => {
        // Process booking
        console.log('Booking confirmed:', state.data);
      },
      next: null, // End conversation
    },
  ],
  onComplete: async (state) => {
    console.log('Conversation completed!', state);
  },
});

// Process user responses
const result1 = await bookingSchema.processResponse(
  JSON.stringify({ city: 'San Francisco' })
);
console.log(result1.nextPrompt); // "What are your check-in and check-out dates?"

const result2 = await bookingSchema.processResponse(
  JSON.stringify({ checkIn: '2025-12-01', checkOut: '2025-12-05' })
);
console.log(result2.nextPrompt); // "How many guests?"0:{"P":null,"b":"BR2GXXFimfBinRJoMr3YY","p":"","c":["","docs","conversation",""],"i":false,"f":[[["",{"children":["docs",{"children":["conversation",{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/7e7d96b1e6991756.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/1145ad3a91ffb5c9.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","2",{"rel":"stylesheet","href":"/_next/static/css/7a622664f4c377b7.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","data-theme":"cmyk","children":["$","body",null,{"className":"__className_f367f3","children":["$","$L2",null,{"children":["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]}]}]]}],{"children":["docs",["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["conversation",["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":[["$","div",null,{"className":"min-h-screen bg-base-100","children":["$","div",null,{"className":"container mx-auto px-6 py-12 max-w-5xl ","children":[["$","div",null,{"className":"mb-12","children":[["$","h1",null,{"className":"text-5xl font-bold mb-4","children":"Conversation Schemas"}],["$","p",null,{"className":"text-xl text-base-content/70","children":"Build structured conversational experiences with custom schemas, validation, and dynamic routing."}]]}],["$","div",null,{"className":"prose max-w-none","children":[["$","h2",null,{"children":"What are Conversation Schemas?"}],["$","p",null,{"children":"Conversation Schemas allow you to define structured conversation flows with validation, state management, and conditional branching. Perfect for building:"}],["$","ul",null,{"children":[["$","li",null,{"children":"Multi-step forms and onboarding flows"}],["$","li",null,{"children":"Booking and reservation systems"}],["$","li",null,{"children":"Customer support workflows"}],["$","li",null,{"children":"Survey and questionnaire bots"}],["$","li",null,{"children":"Interactive tutorials"}]]}],["$","h2",null,{"children":"Basic Example"}],["$","p",null,{"children":"Create a simple hotel booking conversation:"}],["$","$L5",null,{"language":"typescript","children":"$6"}],"$L7","$L8","$L9","$La","$Lb","$Lc","$Ld","$Le","$Lf","$L10","$L11","$L12","$L13","$L14","$L15","$L16","$L17","$L18","$L19","$L1a","$L1b","$L1c","$L1d","$L1e","$L1f","$L20","$L21","$L22"]}]]}]}],null,"$L23"]}],{},null,false]},null,false]},null,false]},null,false],"$L24",false]],"m":"$undefined","G":["$25",[]],"s":false,"S":true}
28:I[2619,["619","static/chunks/619-ba102abea3e3d0e4.js","501","static/chunks/501-26489c9c153fdafc.js","838","static/chunks/app/docs/conversation/page-1661e6a98b49e8b6.js"],""]
29:I[4431,[],"OutletBoundary"]
2b:I[5278,[],"AsyncMetadataOutlet"]
2d:I[4431,[],"ViewportBoundary"]
2f:I[4431,[],"MetadataBoundary"]
30:"$Sreact.suspense"
7:["$","h2",null,{"children":"Using with Agents"}]
8:["$","p",null,{"children":"Integrate conversation schemas with AI agents for intelligent, structured conversations:"}]
9:["$","$L5",null,{"language":"typescript","children":"import {\n  ConversationManager,\n  Agent,\n  AnthropicProvider,\n  ToolRegistry,\n} from '@lov3kaizen/agentsea-core';\n\n// Create agent\nconst agent = new Agent(\n  {\n    name: 'booking-agent',\n    model: 'claude-sonnet-4-20250514',\n    provider: 'anthropic',\n    systemPrompt: `You are a helpful hotel booking assistant.\nExtract information from user messages and format it appropriately.`,\n  },\n  new AnthropicProvider(),\n  new ToolRegistry(),\n);\n\n// Create conversation manager\nconst manager = new ConversationManager(\n  agent,\n  bookingSchema,\n  'user-123',\n);\n\n// Start conversation\nconst start = await manager.start();\nconsole.log(start.prompt); // \"Where would you like to stay?\"\n\n// Process natural language\nconst response = await manager.processMessage(\n  'I want to book a hotel in San Francisco'\n);\nconsole.log(response.response); // Next prompt\nconsole.log(response.aiResponse); // AI-enhanced response"}]
a:["$","h2",null,{"children":"Builder Pattern"}]
b:["$","p",null,{"children":"Use the fluent builder API for cleaner schema definitions:"}]
c:["$","$L5",null,{"language":"typescript","children":"const schema = new ConversationSchemaBuilder()\n  .name('support-flow')\n  .description('Customer support conversation')\n  .startAt('category')\n  .addStep({\n    id: 'category',\n    prompt: 'What type of issue are you experiencing?',\n    next: (response) => {\n      if (response.includes('billing')) return 'billing';\n      if (response.includes('technical')) return 'technical';\n      return 'general';\n    },\n  })\n  .addStep({\n    id: 'billing',\n    prompt: 'Please describe your billing issue.',\n    next: 'resolve',\n  })\n  .addStep({\n    id: 'technical',\n    prompt: 'Please describe your technical issue.',\n    next: 'resolve',\n  })\n  .addStep({\n    id: 'general',\n    prompt: 'How can I help you today?',\n    next: 'resolve',\n  })\n  .addStep({\n    id: 'resolve',\n    prompt: 'Is there anything else I can help with?',\n    next: null,\n  })\n  .onComplete(async (state) => {\n    console.log('Support ticket created:', state.data);\n  })\n  .build();"}]
d:["$","h2",null,{"children":"Dynamic Routing"}]
e:["$","p",null,{"children":"Route users to different conversation paths based on their responses:"}]
f:["$","$L5",null,{"language":"typescript","children":"const schema = new ConversationSchema({\n  name: 'product-quiz',\n  startStep: 'budget',\n  steps: [\n    {\n      id: 'budget',\n      prompt: 'What is your budget?',\n      next: (response, state) => {\n        const budget = parseInt(response);\n        if (budget < 1000) return 'basic-options';\n        if (budget < 3000) return 'mid-options';\n        return 'premium-options';\n      },\n    },\n    {\n      id: 'basic-options',\n      prompt: 'Here are our budget-friendly options...',\n      next: 'finalize',\n    },\n    {\n      id: 'mid-options',\n      prompt: 'Here are our mid-range options...',\n      next: 'finalize',\n    },\n    {\n      id: 'premium-options',\n      prompt: 'Here are our premium options...',\n      next: 'finalize',\n    },\n    {\n      id: 'finalize',\n      prompt: 'Would you like to proceed?',\n      next: null,\n    },\n  ],\n});"}]
10:["$","h2",null,{"children":"Schema Validation"}]
11:["$","p",null,{"children":"Use Zod schemas for robust input validation:"}]
12:["$","$L5",null,{"language":"typescript","children":"import { z } from 'zod';\n\nconst step = {\n  id: 'user-info',\n  prompt: 'Please provide your information.',\n  schema: z.object({\n    email: z.string().email('Invalid email format'),\n    age: z.number()\n      .int()\n      .min(18, 'Must be 18 or older')\n      .max(120, 'Invalid age'),\n    phone: z.string()\n      .regex(/^\\+?[1-9]\\d{1,14}$/, 'Invalid phone format'),\n  }),\n  validation: async (response) => {\n    // Additional async validation\n    const emailExists = await checkEmail(response.email);\n    return !emailExists;\n  },\n  errorMessage: 'Email already registered',\n  next: 'confirm',\n};"}]
13:["$","h2",null,{"children":"State Management"}]
14:["$","p",null,{"children":"Access and manage conversation state throughout the flow:"}]
15:["$","$L5",null,{"language":"typescript","children":"// Get current state\nconst state = schema.getState();\nconsole.log(state.currentStep); // Current step ID\nconsole.log(state.data); // Collected data\nconsole.log(state.history); // Conversation history\n\n// Reset conversation\nschema.reset();\n\n// Export/import state for persistence\nconst exported = schema.exportState();\nlocalStorage.setItem('conversation', exported);\n\n// Later...\nconst saved = localStorage.getItem('conversation');\nschema.importState(saved);"}]
16:["$","h2",null,{"children":"Callbacks"}]
17:["$","p",null,{"children":"Execute custom logic at different stages:"}]
26:T49c,const schema = new ConversationSchema({
  name: 'payment-flow',
  startStep: 'amount',
  steps: [
    {
      id: 'amount',
      prompt: 'How much would you like to pay?',
      onComplete: async (response, state) => {
        // Called after this step completes
        console.log('Amount entered:', response);
      },
      next: 'method',
    },
    {
      id: 'method',
      prompt: 'Choose payment method.',
      onComplete: async (response, state) => {
        // Validate payment method
        await validatePaymentMethod(response);
      },
      next: 'process',
    },
    {
      id: 'process',
      prompt: 'Processing payment...',
      onComplete: async (response, state) => {
        // Process payment
        await processPayment(
          state.data.amount,
          state.data.method
        );
      },
      next: null,
    },
  ],
  onComplete: async (state) => {
    // Called when entire conversation completes
    console.log('Payment completed:', state.data);
    await sendReceipt(state.data);
  },
  onError: async (error, state) => {
    // Handle errors
    console.error('Payment error:', error);
    await logError(error, state);
  },
});18:["$","$L5",null,{"language":"typescript","children":"$26"}]
19:["$","h2",null,{"children":"Error Handling"}]
1a:["$","p",null,{"children":"Handle validation errors and retries gracefully:"}]
1b:["$","$L5",null,{"language":"typescript","children":"const step = {\n  id: 'verification-code',\n  prompt: 'Enter the 6-digit verification code.',\n  schema: z.object({\n    code: z.string().length(6).regex(/^\\d{6}$/),\n  }),\n  validation: async (response) => {\n    const isValid = await verifyCode(response.code);\n    return isValid;\n  },\n  errorMessage: 'Invalid verification code. Please try again.',\n  maxRetries: 3,\n  next: 'success',\n};\n\n// Process with error handling\ntry {\n  const result = await schema.processResponse(userInput);\n\n  if (!result.success) {\n    console.log(result.message); // Error message\n    // Show error to user and retry\n  } else if (result.isComplete) {\n    console.log('Conversation completed!');\n  } else {\n    console.log(result.nextPrompt); // Next question\n  }\n} catch (error) {\n  console.error('Critical error:', error);\n}"}]
1c:["$","h2",null,{"children":"Best Practices"}]
1d:["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"Clear Prompts"}],": Write clear, concise prompts that explain what information is needed"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Validation"}],": Use Zod schemas for type safety and validation"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Error Messages"}],": Provide helpful error messages that guide users"]}],["$","li",null,{"children":[["$","strong",null,{"children":"State Persistence"}],": Save conversation state to allow users to resume"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Callbacks"}],": Use callbacks for side effects (API calls, database updates)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Dynamic Routing"}],": Create personalized flows based on user responses"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Testing"}],": Test all conversation paths and edge cases"]}]]}]
1e:["$","h2",null,{"children":"Complete Example"}]
1f:["$","p",null,{"children":"A full restaurant reservation system:"}]
27:T767,import {
  ConversationSchema,
  ConversationManager,
  Agent,
  AnthropicProvider,
  ToolRegistry,
} from '@lov3kaizen/agentsea-core';
import { z } from 'zod';

const reservationSchema = new ConversationSchema({
  name: 'restaurant-reservation',
  startStep: 'date',
  steps: [
    {
      id: 'date',
      prompt: 'What date would you like to reserve?',
      schema: z.object({
        date: z.string().regex(/^\d{4}-\d{2}-\d{2}$/),
      }),
      validation: (response) => {
        const date = new Date(response.date);
        return date >= new Date();
      },
      errorMessage: 'Please select a future date',
      next: 'time',
    },
    {
      id: 'time',
      prompt: 'What time would you prefer?',
      schema: z.object({
        time: z.enum(['11:00', '12:00', '13:00', '18:00', '19:00', '20:00']),
      }),
      next: 'party-size',
    },
    {
      id: 'party-size',
      prompt: 'How many people?',
      schema: z.object({
        size: z.number().min(1).max(12),
      }),
      next: 'special-requests',
    },
    {
      id: 'special-requests',
      prompt: 'Any special requests or dietary requirements?',
      next: 'confirm',
    },
    {
      id: 'confirm',
      prompt: 'Please confirm your reservation.',
      onComplete: async (response, state) => {
        await createReservation({
          date: state.data.date.date,
          time: state.data.time.time,
          size: state.data['party-size'].size,
          notes: response,
        });
      },
      next: null,
    },
  ],
  onComplete: async (state) => {
    await sendConfirmationEmail(state.data);
  },
});

// Use with agent
const agent = new Agent(/* config */);
const manager = new ConversationManager(agent, reservationSchema);

// Handle user messages
async function handleMessage(userMessage: string) {
  const result = await manager.processMessage(userMessage);
  return result.response;
}20:["$","$L5",null,{"language":"typescript","children":"$27"}]
21:["$","h2",null,{"children":"Next Steps"}]
22:["$","ul",null,{"children":[["$","li",null,{"children":["$","$L28",null,{"href":"/docs/agents","children":"Learn about Agents"}]}],["$","li",null,{"children":["$","$L28",null,{"href":"/docs/tools","children":"Explore Tools"}]}],["$","li",null,{"children":["$","$L28",null,{"href":"/examples","children":"View Examples"}]}]]}]
23:["$","$L29",null,{"children":["$L2a",["$","$L2b",null,{"promise":"$@2c"}]]}]
24:["$","$1","h",{"children":[null,[["$","$L2d",null,{"children":"$L2e"}],["$","meta",null,{"name":"next-size-adjust","content":""}]],["$","$L2f",null,{"children":["$","div",null,{"hidden":true,"children":["$","$30",null,{"fallback":null,"children":"$L31"}]}]}]]}]
2e:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
2a:null
2c:{"metadata":[["$","title","0",{"children":"AgentSea - Unite and Orchestrate AI Agents"}],["$","meta","1",{"name":"description","content":"Build powerful agentic AI applications with AgentSea. Unite AI agents and services with multi-provider support, workflow orchestration, MCP protocol, and enterprise-grade observability."}]],"error":null,"digest":"$undefined"}
31:"$2c:metadata"
